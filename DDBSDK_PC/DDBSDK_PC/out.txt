从HTTP服务器上下载一个文件有很多方法，  “热心”的微软提供了 WinInet 类，用起来也很方便。当然，我们也可以自己实现这些功能，通过格式化请求头很容易就能实现断点续传和检查更新等等功能 。本文附带的工程中有一个支持 HTTP1.1 协议，直接用 Socket 实现下载功能的 DLL，实现了以下功能：

   1. 连接主机
   2. 格式化请求头
   3. 设置接收,发送超时
   4. 接收并分析回应头 

连接，发送，设置超时，接收数据等我就不细说了，windows socket早就做好了，调用相应的函数就OK了。
　　要想从服务器下载文件，首先要向服务器发送一个请求。HTTP 请求头由若干行字符串组成。下面结合实例说说 HTTP 请求头的格式。假设要下载 http://www.sina.com.cn/index.html 这个网页 ，那么请求头的写法如下：

第1行：方法，请求的内容，HTTP协议的版本
下载一般可以用GET方法，请求的内容是“/index.html”，HTTP协议的版本是指浏览器支持的版本，对于下载软件来说无所谓，所以用1.1版 “HTTP/1.1”；
“GET /index.html HTTP/1.1”

第2行：主机名，格式为“Host:主机”
在这个例子中是：“Host:www.sina.com.cn”

第3行：接受的数据类型，下载软件当然要接收所有的数据类型，所以：
“Accept:*/*”

第4行：指定浏览器的类型
有些服务器会根据客户服务器种类的不同会增加或减少一些内容，在这个例子中可以这样写：
“User-Agent:Mozilla/4.0 (compatible; MSIE 5.00; Windows 98)”

第5行：连接设置
设定为一直保持连接：“Connection:Keep-Alive”